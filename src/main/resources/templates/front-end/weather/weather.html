<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>天氣查詢</title>
  <link rel="stylesheet" th:href="@{/css/common.css}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    #search {
      margin: 80px 100px 0px 80px;
      display: inline-block;
    }

    #taiwan_pic {
      width: 360px;
      margin: 10px 50px 0px 20px;
    }

    #weatherContainer {
      display: inline-block;
      margin-right: 20px;
      width: 1000px;
    }

    .content-container {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }
    
    .circle {
      width: 15px;
      height: 15px;
      background-color: red;
      border-radius: 50%;
      position: fixed;
    }
    
    #tps {
      margin: 110px 200px 400px 300px;
    }
        
    #hws {
      margin: 150px 200px 400px 260px;
    }
        
    #tn {
      margin: 175px 200px 400px 300px;
    }
        
    #fy {
      margin: 200px 200px 400px 290px;
    }
        
    #awd {
      margin: 170px 200px 400px 250px;
    }
        
    #hs {
      margin: 165px 200px 400px 230px;
    }
        
    #xt {
      margin: 200px 200px 400px 213px;
    }
        
    #kt {
      margin: 410px 200px 400px 200px;
    }
    #sl {
      margin: 380px 200px 400px 200px;
    }
    #gw {
      margin: 100px 200px 400px 240px;
    }
    #dys {
      margin: 63px 200px 400px 270px;
    }
    #tz {
      margin: 270px 200px 400px 200px;
    }
    #nd {
      margin: 60px 200px 400px 305px;
    }
    #myy {
      margin: 60px 200px 400px 290px;
    }
    #dxs {
      margin: 130px 200px 400px 230px;
    }
    #als {
      margin: 225px 200px 400px 190px;
    }
    #wl {
      margin: 120px 200px 400px 270px;
    }
    #zb {
      margin: 320px 200px 400px 240px;
    }
    #bxs {
      margin: 145px 200px 400px 230px;
    }
    #xy {
      margin: 260px 200px 400px 230px;
    }
  </style>
</head>
<body>
  <nav th:insert="~{/front-end/navbar.html}"></nav>

  <div id="search">
    <h4>風景區天氣查詢</h4>
    <h5>選擇風景區:</h5>
    <select name="locName" id="locName">
      <option th:each="locName : ${placeList}" th:value="${locName}" th:text="${locName}"></option>
    </select>
    <button type="button" id="searchWeather">查詢</button>
  </div>

  <div class="content-container">
    <div id="taiwan">
      <img src="/images/taiwan.png" id="taiwan_pic">
    </div>

    <div class="circle" id="tps" data-locname="太平山國家森林遊樂區"></div>
    <div class="circle" id="hws" data-locname="合歡山國家森林遊樂區"></div>
    <div class="circle" id="tn" data-locname="池南國家森林遊樂區"></div>
    <div class="circle" id="fy" data-locname="富源國家森林遊樂區"></div>
    <div class="circle" id="awd" data-locname="奧萬大國家森林遊樂區"></div>
    <div class="circle" id="hs" data-locname="惠蓀林場森林遊樂區"></div>
    <div class="circle" id="xt" data-locname="溪頭森林遊樂特定區"></div>
    <div class="circle" id="kt" data-locname="墾丁國家森林遊樂區"></div>
    <div class="circle" id="sl" data-locname="雙流國家森林遊樂區"></div>
    <div class="circle" id="gw" data-locname="觀霧國家森林遊樂區"></div>
    <div class="circle" id="dys" data-locname="東眼山國家森林遊樂區"></div>
    <div class="circle" id="tz" data-locname="藤枝國家森林遊樂區"></div>
    <div class="circle" id="nd" data-locname="內洞國家森林遊樂區"></div>
    <div class="circle" id="myy" data-locname="滿月圓國家森林遊樂區"></div>
    <div class="circle" id="dxs" data-locname="大雪山國家森林遊樂區"></div>
    <div class="circle" id="als" data-locname="阿里山國家森林遊樂區"></div>
    <div class="circle" id="wl" data-locname="武陵國家森林遊樂區"></div>
    <div class="circle" id="zb" data-locname="知本國家森林遊樂區"></div>
    <div class="circle" id="bxs" data-locname="八仙山國家森林遊樂區"></div>
    <div class="circle" id="xy" data-locname="向陽國家森林遊樂區"></div>

    <div id="weatherContainer" style="display:none;">
      <div id="weatherContent" class="border rounded p-2 bg-light shadow-sm"></div>
    </div>
  </div>

  <div th:insert="~{/front-end/notification/notification.html}"></div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
  <script src="/js/common.js"></script>
  <script>
    $(document).ready(function() {
      $('#example').DataTable({
        "lengthMenu": [10],
        "searching": false,
        "paging": false,
        "ordering": false,
        "bPaginate": false,
        "language": {
          "processing": "處理中...",
          "loadingRecords": "載入中...",
          "lengthMenu": "顯示 _MENU_ 筆結果",
          "zeroRecords": "沒有符合的結果",
          "info": "",
          "infoEmpty": "",
          "infoFiltered": "",
          "infoPostFix": "",
          "search": "搜尋:",
          "paginate": {
            "first": "第一頁",
            "previous": "上一頁",
            "next": "下一頁",
            "last": "最後一頁"
          },
          "aria": {
            "sortAscending": ": 升冪排列",
            "sortDescending": ": 降冪排列"
          }
        }
      });

      $("#searchWeather").on("click", function(event) {
        event.preventDefault();
        var locName = $("#locName").val();

        $.ajax({
          url: '/weather/search',
          method: 'GET',
          data: { locName: locName },
          success: function(data) {
            $('#weatherContent').html(data);
            $('#weatherContainer').show();
          },
          error: function() {
            alert('加載通知失敗');
          }
        });
      });

      $('.circle').on('click', function(event) {
        event.preventDefault();
        var locName = $(this).data('locname');

        $.ajax({
          url: '/weather/ajexsearch',
          method: 'GET',
          data: { locName: locName },
          success: function(data) {
            $('#weatherContent').html(data);
            $('#weatherContainer').show();
          },
          error: function() {
            alert('加載通知失敗');
          }
        });
      });
    });
  </script>
</body>
</html>
