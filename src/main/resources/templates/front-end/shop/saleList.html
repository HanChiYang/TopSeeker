<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>優惠活動總覽</title>
<!-- Bootstrap CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
	crossorigin="anonymous">

<!-- icon用 -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
<!-- 從 Google Fonts 引入 "Playfair Display" 字體 -->
<link
	href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap"
	rel="stylesheet">


<!-- Topseeker前台導航列CSS -->
<!-- <link rel="stylesheet" th:href="@{/css/common.css}"> -->
<!-- 商城導航列CSS -->
<link rel="stylesheet" th:href="@{/css/shop_front_end_test.css}">

<link rel="stylesheet" href="https://cdn.datatables.net/1.13.5/css/dataTables.jqueryui.min.css" /> <!-- ●●css for jquery datatables 用 -->

<style type="text/css">

body{

}

main{
	position: relative;
    z-index: 1;
}

main::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url("/images/salelist2.jpg");
    background-size: cover;
    background-position: top;
    opacity: 0.5;
    z-index: -1;
}

.content{
	position: relative;
    z-index: 2; 
}

h2{
	
	position:relative;
	text-align: center;
	padding-top: 20px;

}

 .container {
        display: flex; 
        flex-wrap: wrap;
        gap: 20px; 
        justify-content: center;
        width: 100%;
        padding: 20px;
        position: relative;
    }
	
 .container .saleitem {
        width: 30%;
        display: flex;
        flex-direction: column;
        padding: 10px;
        box-sizing: border-box;
        margin-bottom: 20px;
        position: relative;
	    background-size: cover;
	    background-position: center;
	    height: 300px;
        background-image: url('/images/salelist.jpg');
    	padding: 5px;
    	border-radius: 50px;
    }
 	.container .saleitem .saleinfo span{
 		font-size: 18px;
 		width:100%;
 		justify-content:center;
		display: flex;
		font-style: normal;
		padding-top:10px;
 	}
 	
 	.container .saleitem .saleinfo span.discount{
 		font-size: 25px;
 		font-style: inherit;
 		color: red;
 	}

</style>
</head>
<body>

	<!-- topseeker前台Navbar -->
	<nav th:insert="~{/front-end/navbar.html}"></nav>

	<!-- 商城用Navbar -->
	<nav th:insert="~{/front-end/shop/shop_front_end_nav.html}"></nav>
	
	<main>
		<div class="content">
			<h2>目前活動中的優惠</h2>	
			<div class="container">
				
				<div class="saleitem"  th:each="saleVO : ${saleLists}">
					
						<div class="saleinfo">
							<span th:text="${saleVO.saleName}"></span>
							<span th:text="自 + ${#dates.format(saleVO.saleStdate, 'yyyy-MM-dd')}"></span>
							<span th:text="至 + ${#dates.format(saleVO.saleEddate, 'yyyy-MM-dd')}"></span>
							<span th:text="全館滿 + ${saleVO.saleAmount}"></span>
							<span class="discount" th:text="${saleVO.saleDiscount}"></span>
						</div>	
				
				</div>
			 </div>
		
		</div>

	</main>
	
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>                                    <!-- ●●js  for jquery datatables 用 -->
<script	src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>              <!-- ●●js  for jquery datatables 用 -->
<!-- ●● jquery datatables 設定 -->
<script>
	$(document).ready(function() {
		$('#saleList').DataTable({
// 			"lengthMenu": [3 ,5, 10, 20, 50, 100],
			"searching": false,  //搜尋功能, 預設是開啟
		    "paging": false,     //分頁功能, 預設是開啟
		    "ordering": false,   //排序功能, 預設是開啟
		    
		    "language": {
		        "processing": "處理中...",
		        "loadingRecords": "載入中...",
		        "lengthMenu": "顯示 _MENU_ 筆結果",
		        "zeroRecords": "沒有符合的結果",
		        "info": "顯示第 _START_ 至 _END_ 筆結果，共<font color=red> _TOTAL_ </font>筆",
		        "infoEmpty": "顯示第 0 至 0 筆結果，共 0 筆",
		        "infoFiltered": "(從 _MAX_ 筆結果中過濾)",
		        "infoPostFix": "",
		        "search": "搜尋:",
		        "paginate": {
		            "first": "第一頁",
		            "previous": "上一頁",
		            "next": "下一頁",
		            "last": "最後一頁"
		        },
		        "aria": {
		            "sortAscending":  ": 升冪排列",
		            "sortDescending": ": 降冪排列"
		        }
		    }
		});
	});
</script>
<script>	
	$(document).ready(function(){
		$(".discount").each(function(){
// 			console.log(this);
			var discount = parseFloat($(this).text());
			var roundedDiscount = Math.round(discount * 100);
// 			console.log(discount);
			if(!isNaN(discount)){
				if(roundedDiscount % 10 === 0){
					
					$(this).text((discount)*10 + "折");
					
				}else{
					$(this).text(roundedDiscount + "折");
				}
				
			}
		});
		
	});

</script>
</body>
</html>