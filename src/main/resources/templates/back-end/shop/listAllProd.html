<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>檢視/管理所有商品</title>

<!-- Bootstrap CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
	crossorigin="anonymous">


<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<!-- ●●js  for jquery datatables 用 -->
<script
	src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
<!-- ●●js  for jquery datatables 用 -->
<link rel="stylesheet"
	href="https://cdn.datatables.net/1.13.5/css/dataTables.jqueryui.min.css" />
<!-- ●●css for jquery datatables 用 -->


<!-- ●● jquery datatables 設定 -->
<script>
	$(document)
			.ready(
					function() {
						$('#example')
								.DataTable(
										{
											"lengthMenu" : [ 5, 10, 20, 50, 100 ],
											"searching" : true, //搜尋功能, 預設是開啟
											"paging" : true, //分頁功能, 預設是開啟
											"ordering" : true, //排序功能, 預設是開啟
											"language" : {
												"processing" : "處理中...",
												"loadingRecords" : "載入中...",
												"lengthMenu" : "顯示 _MENU_ 筆結果",
												"zeroRecords" : "沒有符合的結果",
												"info" : "顯示第 _START_ 至 _END_ 筆結果，共<font color=red> _TOTAL_ </font>筆",
												"infoEmpty" : "顯示第 0 至 0 筆結果，共 0 筆",
												"infoFiltered" : "(從 _MAX_ 筆結果中過濾)",
												"infoPostFix" : "",
												"search" : "搜尋:",
												"paginate" : {
													"first" : "第一頁",
													"previous" : "上一頁",
													"next" : "下一頁",
													"last" : "最後一頁"
												},
												"aria" : {
													"sortAscending" : ": 升冪排列",
													"sortDescending" : ": 降冪排列"
												}
											}
										});
					});

	$(document).ready(function() {
		var navbarHeight = $('.navbar').outerHeight();
		var shopnavbarHeight = $('.shopnavbar').outerHeight();
		$('.sidebar').css('top', navbarHeight + shopnavbarHeight);
		$('.display').css('margin-top', navbarHeight + shopnavbarHeight + 20);
	});
</script>

<style type="text/css">
* {
	margin: 0;
	padding: 0;
	box-sizing: border-box;
}

.navbar {
	position: fixed;
	top: 0;
	width: 100%;
	border-bottom: solid 1px #E0E0E0;
	z-index: 1000;
}

.shopnavbar {
	background-color: #90c320;
	font-size: 36px;
	font-weight: bold;
	border-bottom: solid 1px #E0E0E0;
	z-index: 999;
	position: fixed;
	top: 56px; /* 確保位於 navbar 下方 */
	width: 100%;
}

.sidebar {
	position: fixed;
	top: 112px; /* 確保位於 shopnavbar 下方 */
	bottom: 0;
	background-color: #f0f8e0;
	width: 150px;
	padding-top: 20px;
	padding-bottom: 20px; /* 確保內容不被 bottom 覆蓋 */
	color: #333;
	font-size: 16px;
	border-right: solid 1px #E0E0E0;
	overflow-y: auto; /* 確保內容過多時可以滾動 */
}

.display {
	margin-left: 170px; /* 確保內容位於 sidebar 右側 */
	margin-top: 200px; /* 確保內容位於 navbar 和 shopnavbar 下方 */
	padding: 10px;
	width: calc(100% - 200px); /* 確保內容佔滿剩餘寬度 */
	overflow-x: auto; /* 確保內容過寬時可以滾動 */
}

a img {
	border: none; /* 移除圖片邊框 */
}

a {
	text-decoration: none; /* 移除超連結的底線 */
}
</style>
</head>
<body>
	<nav th:insert="~{/back-end/shop/back_end_navbar.html}"></nav>
	<nav class="shopnavbar">
		<a th:href="@{/shop/shopManagement/select_page}"> <img id="logo"
			th:src="@{/images/TopSeeker_logo.png}" width="80px">
		</a>檢視/管理所有商品
	</nav>

	<div class="sidebar">
		<ul>
			<li><h6>
					<a th:href='@{/shop/shopManagement/select_page}'>查詢商品(主頁)</a>
				</h6></li>
			<li><h6>
					<a th:href='@{/shop/shopManagement/listAllProd}'>檢視所有商品</a>
				</h6></li>
			<li><h6>
					<a href='addProd'>新增商品</a>
				</h6></li>
		</ul>
	</div>

	<div class="display">
		<table id="example" class="display">
			<thead>
				<tr style="background-color: #d9ead3">
					<th>商品編號</th>
					<th>商品類別</th>
					<th>商品圖片</th>
					<th>商品名稱</th>
					<th>商品介紹</th>
					<th>商品定價</th>
					<th>商品建立時間</th>
					<th>商品狀態</th>
					<th>修改</th>
<!-- 					<th>刪除</th> -->
				</tr>
			</thead>
			<tbody>
				<th:block th:each="shopProductVO : ${shopListData}">
					<tr>
						<td width="50px" th:text="${shopProductVO.prodNo}"></td>
						<td th:text="${shopProductVO.shopProductTypeVO.prodTypeName}"></td>
						<td><img
							th:src="@{/shop/DBGifReader} + '?prodNo=' + ${shopProductVO.prodNo} "
							width="80px"> 
						<td width="150px" th:text="${shopProductVO.prodName}"></td>
						<td width="200px"
							th:text="${#strings.abbreviate(shopProductVO.prodInfo, 100)}"></td>
						<td width="80px" th:text="'$' + ${shopProductVO.prodPrice}"></td>
						<td width="100px" th:text="${shopProductVO.prodDate}"></td>
						<td>
							<div th:switch="${shopProductVO.prodStatus}">
								<span th:case="'0'">下架</span> <span th:case="'1'">上架</span>
							</div>
						</td>
						<td>
							<form method="post"
								th:action="@{/shop/shopManagement/getOne_For_Update}"
								style="margin-bottom: 0px;">
								<input type="submit" value="修改"> <input type="hidden"
									name="prodNo" th:value="${shopProductVO.prodNo}">
							</form>
						</td>
<!-- 						<td> -->
<!-- 							<form method="post" th:action="@{/shop/shopManagement/delete}" -->
<!-- 								style="margin-bottom: 0px;"> -->
<!-- 								<input type="submit" value="刪除"> <input type="hidden" -->
<!-- 									name="prodNo" th:value="${shopProductVO.prodNo}"> -->
<!-- 							</form> -->
<!-- 						</td> -->
					</tr>
				</th:block>
			</tbody>
		</table>
	</div>
</body>
</html>
